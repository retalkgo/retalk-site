import { Callout } from "nextra/components";
import { Steps, Tab, Tabs } from "nextra-theme-docs";

import Version from "../../components/Version";

# 部署

## 后端

<Steps>

### 下载二进制文件

首先，从 **[GitHub Release](https://github.com/retalkgo/retalk/releases/latest)** 下载对应系统的后端二进制文件压缩包。

### 解压

解压上一步下载的压缩包：

<Tabs items={["Linux", "Windows", "macOS"]}>
	<Tab>
		```bash
		tar -zxvf retalk_v0.1.0_linux_amd64.tar.gz -C .
		rm -rf retalk_v0.1.0_linux_amd64.tar.gz 
	```
	</Tab>
	<Tab>请使用 Windows 附带的解压缩软件或第三方解压软件解压下载到的压缩包。</Tab>
	<Tab>
		```bash
		tar -zxvf retalk_v0.1.0_darwin_amd64.tar.gz -C .
		rm -rf retalk_v0.1.0_darwin_amd64.tar.gz 
	```
	</Tab>
</Tabs>

解压后就能得到名为 `retalk` 的二进制可执行文件（不同系统下存在后缀名的差别，如 Windows 下为 `.exe`）。

### 启动

运行解压后的可执行文件即可运行服务端，默认端口为 3000。

<Callout type="info">您可以通过 screen 等方式使其持续运行</Callout>

</Steps>

## 前端

<Steps>

### 在网站引入JS与CSS

<Tabs items={['通过CDN', '通过NPM']}>
    <Tab>
        ```html
        <script src="https://cdn.jsdelivr.net/npm/@retalkgo/client@latest/dist/retalk.js">
        <script src="https://cdn.jsdelivr.net/npm/@retalkgo/client@latest/dist/retalk.css">
        ```
        <Callout type="warning">
                Jsdelivr 在部分地区的访问速度并不理想，我们建议您通过 Jsdelivr 镜像或其他 NPM CDN 引入静态资源。
        </Callout>
    </Tab>
    <Tab>
        ```bash
        npm install @retalkgo/client
        # 或使用 yarn
        yarn add @retalkgo/client
        ```
        安装后，您可以通过 `import` 进行导入：
        ```typescript
        import Retalk from "@retalkgo/client";
        ```
    </Tab>
</Tabs>

### 初始化前端

<!-- eslint-skip -->

```html
<div id="retalk"></div>
<script>
	new Retalk({
		el: "#retalk",
		server: "https://your_domain",
	});
</script>
```

您可以通过检测控制台是否输出如下的版本信息验证安装：

<Version />

### 初始化后端

在初始化前端后，评论区域会自动弹出初始化页面。

</Steps>
